# 内容中台 - 产品功能描述文档

> **文档更新日期**: 2025年
> 
> **实现状态说明**:
> - ✅ **已实现** - 功能已完整实现并可用
> - ⚠️ **部分实现** - 功能已实现但可能缺少部分特性
> - ❌ **待实现** - 功能尚未实现
> 
> **技术说明**:
> - 前端使用 React + TypeScript + Vite + Fabric.js
> - 后端使用 Node.js + Express + Prisma + SQLite
> - 路由使用 HashRouter（适配 Electron 环境）
> - AI功能集成通义千问 API（文案改写、AI生图）

## 一、模块概述

内容中台系统包含以下四个主要模块：
1. **作品** - 内容生成与编辑的核心模块 ✅
2. **展示** - 作品展示与管理模块 ✅
3. **模版** - 模版管理模块 ✅
4. **素材** - 素材管理模块 ✅

---

## 二、作品模块

### 2.1 内容生成页面

内容生成页面是系统的核心编辑页面，提供完整的在线设计编辑功能。

#### 2.1.1 页面布局结构

页面采用三栏布局：
- **顶部导航栏**：文件操作、历史记录、导出功能
- **左侧导航栏**：添加元素、模版、素材库
- **中间编辑区**：主渲染区、画布管理、图层管理
- **右侧属性栏**：元素属性编辑面板

#### 2.1.2 页面顶部导航

##### 2.1.2.1 主页icon ✅

**功能描述**：返回主页的导航按钮

**交互流程**：
- 点击主页icon按钮，直接返回主页（当前实现）
- ⚠️ **待完善**：系统弹出确认提示："是否保存当前作品？"
  - 选择"保存"：保存当前作品后返回展示页
  - 选择"不保存"：直接返回展示页，不保存当前修改
  - 选择"取消"：关闭提示，继续编辑

**约束条件**：
- ⚠️ 如果作品有未保存的修改，应该提示用户（当前未实现）
- 返回后，当前编辑状态丢失

##### 2.1.2.2 "文件"下拉框

**功能描述**：文件操作菜单，包含文件相关功能和编辑区相关功能

###### 2.1.2.2.1 文件相关功能

**功能描述**：文件的新建、保存、创建副本等操作

**按钮列表**：
1. **新建文件** ✅
   - **交互流程**：点击后创建空白画布（在当前窗口）
   - **表单字段**：无（直接创建）
   - **约束条件**：
     - ✅ 如果当前窗口有未保存作品，提示保存
     - ⚠️ 当前实现为在当前窗口创建，而非新窗口

2. **创建副本** ❌
   - **交互流程**：
     - 点击后，带着现有信息打开一个新窗口
     - 新窗口中的作品命名为"原作品名_副本"
     - 新作品ID自动生成
   - **表单字段**：无（自动命名）
   - **约束条件**：
     - 必须已保存当前作品才能创建副本
     - 副本与原作品独立，修改互不影响
   - **当前状态**：功能待实现，点击后显示提示信息

3. **保存** ✅
   - **交互流程**：
     - 点击后保存现有信息
     - 显示保存成功提示
     - 如果作品未命名，弹出命名对话框
   - **表单字段**（命名对话框）：
     - 作品名称（必填，文本输入框，最大50字符）
     - 保存按钮
     - 取消按钮
   - **约束条件**：
     - 作品名称不能为空
     - 作品名称不能与已有作品重复（提示用户）
     - 保存成功后，作品状态更新为"已保存"
     - 防重复提交：保存过程中按钮禁用

4. **保存至** ⚠️
   - **功能描述**：文件夹增删改查功能
   - **交互流程**：
     - 点击后弹出文件夹选择对话框
     - ⚠️ 显示文件夹树形结构（UI已实现，但功能待完善）
     - ⚠️ 可以新建文件夹、重命名文件夹、删除文件夹（部分实现）
     - 选择目标文件夹后保存
   - **表单字段**（文件夹管理）：
     - 文件夹树（只读展示）
     - 新建文件夹按钮
     - 重命名按钮（右键菜单）
     - 删除按钮（右键菜单）
   - **新建文件夹表单**：
     - 文件夹名称（必填，文本输入框，最大30字符）
     - 父文件夹（下拉选择，默认当前选中文件夹）
     - 保存按钮
     - 取消按钮
   - **约束条件**：
     - 文件夹名称不能为空
     - 同一父文件夹下不能有重名文件夹
     - 删除文件夹前需确认，且文件夹为空才能删除
     - 保存作品时，如果目标文件夹不存在，提示错误
   - **当前状态**：功能待实现，点击后显示提示信息

###### 2.1.2.2.2 编辑区相关功能

**功能描述**：编辑区的显示控制功能

**功能项**：
1. **标尺与参考线** ❌
   - **交互流程**：
     - 点击切换显示与隐藏状态
     - 显示时，编辑区显示标尺和参考线
     - 隐藏时，编辑区不显示标尺和参考线
   - **状态切换**：
     - 显示状态：按钮高亮，编辑区显示标尺
     - 隐藏状态：按钮正常，编辑区隐藏标尺
   - **约束条件**：无
   - **当前状态**：功能待实现，点击后显示提示信息

##### 2.1.2.3 前进/后退 ✅

**功能描述**：操作历史记录功能

**交互流程**：
- 点击"后退"按钮：撤销上一步操作
- 点击"前进"按钮：重做下一步操作
- 按钮状态：
  - ✅ 可后退时，"后退"按钮可用
  - ✅ 不可后退时，"后退"按钮禁用（灰色）
  - ✅ 可前进时，"前进"按钮可用
  - ✅ 不可前进时，"前进"按钮禁用（灰色）

**约束条件**：
- ✅ 记录最近50步操作（实际实现为50步，而非20步）
- ✅ 超过限制后，最早的操作记录被清除
- ✅ 执行新操作后，前进记录清空

##### 2.1.2.4 导出 ✅

**功能描述**：将作品导出为不同格式

**交互流程**：
- 点击"导出"按钮，弹出导出对话框
- 选择导出格式和页面范围
- 点击"开始导出"开始导出
- 导出完成后，自动下载文件

**表单字段**（导出对话框）：
- ✅ 导出格式（单选，必填）：
  - PNG（默认）
  - PDF
  - GIF
- ✅ 画板页面页码选择（多选，必填）：
  - 全选复选框
  - 页面列表（显示所有画板页面，可勾选）
  - ⚠️ 页面预览缩略图（待实现）
- 导出按钮
- 取消按钮

**约束条件**：
- ✅ 至少选择一个页面才能导出
- ✅ 导出过程中显示进度条
- ✅ 导出失败时显示错误提示
- ✅ 防重复提交：导出过程中按钮禁用

#### 2.1.3 页面左边导航

##### 2.1.3.1 添加

**功能描述**：添加图片和文字元素到画布

###### 2.1.3.1.1 上传图片

**交互流程**：
- 点击"上传图片"按钮
- 弹出文件选择对话框
- 选择图片文件（支持JPG、PNG、GIF格式，单个文件最大10MB）
- 上传成功后，图片添加到画布中心位置

**约束条件**：
- 文件格式校验：仅支持JPG、PNG、GIF
- 文件大小校验：单个文件不超过10MB
- 上传失败时显示错误提示
- 上传过程中显示进度条

###### 2.1.3.1.2 添加文字

**功能描述**：添加不同类型的文字元素

**文字类型**（下拉选择）：
1. **标题** ✅
   - 点击后，在画布中心添加标题文字框
   - 默认文字："标题"
   - 默认字体大小：32px
   - 默认字体：系统默认字体

2. **副标题** ✅
   - 点击后，在画布中心添加副标题文字框
   - 默认文字："副标题"
   - 默认字体大小：24px
   - 默认字体：系统默认字体

3. **正文** ✅
   - 点击后，在画布中心添加正文文字框
   - 默认文字："正文"
   - 默认字体大小：16px
   - 默认字体：系统默认字体

4. **变形文字** ❌
   - 点击后，在画布中心添加变形文字框
   - 默认文字："变形文字"
   - 支持文字变形效果（弯曲、波浪等）
   - **当前状态**：功能待实现

5. **3D文字** ❌
   - 点击后，在画布中心添加3D文字框
   - 默认文字："3D文字"
   - 支持3D立体效果
   - **当前状态**：功能待实现

**交互流程**：
- 选择文字类型后，立即在画布中心添加对应类型的文字元素
- 文字元素自动处于选中状态
- 右侧属性栏自动切换到文字编辑面板

**约束条件**：无

##### 2.1.3.2 模版 ✅

**功能描述**：模版应用功能

**交互流程**：
- 点击"模版"按钮，打开模版选择面板（左侧抽屉）
- ✅ 显示模版列表（缩略图展示）
- ✅ 支持关键词搜索模版
- ✅ 支持标签筛选模版
- 点击模版，弹出确认对话框："应用此模版将替换当前作品的样式（背景、文字样式），元素和图片保持不变。是否继续？"
- 确认后：
  - ✅ 应用模版的样式（背景、文字样式）到当前作品
  - ✅ 模版上的元素、图片直接显示到当前作品
  - ✅ 当前作品的原有元素和图片保留，样式被替换

**约束条件**：
- ✅ 应用模版前必须确认
- ✅ 应用后不可撤销（但可通过历史记录后退）
- ⚠️ 如果当前作品有未保存修改，提示用户先保存（待完善）

**新增功能**：
- ✅ **模板解析**：分析模板内容，生成AI文案需求，支持文章分页功能

##### 2.1.3.3 元素

**功能描述**：添加预设素材元素

**功能项**：
1. **预设素材**
   - 一些预设的素材（形状、SVG、图标）
   - 点击素材后，添加到画布中心
   - 素材分类展示：形状、SVG、图标

2. **自己的元素**
   - 显示用户保存的自定义元素
   - 可以另存为元素：选中画布中的元素，点击"保存为元素"按钮
   - 保存元素表单：
     - 元素名称（必填，文本输入框，最大30字符）
     - 元素分类（下拉选择，可选：形状、图标、其他）
     - 保存按钮
     - 取消按钮

**约束条件**：
- 元素名称不能为空
- 保存的元素可以在后续作品中重复使用

##### 2.1.3.4 文字

**功能描述**：文字素材库

**功能项**：
1. **添加文字**
   - 点击后，在画布中心添加文字元素
   - 默认文字："文字"

2. **收藏到文件夹**
   - 选中画布中的文字元素
   - 点击"收藏到文件夹"
   - 弹出文件夹选择对话框
   - 选择目标文件夹后保存

3. **收藏后按标签进行展示**
   - 收藏的文字按标签分类展示
   - 可以给文字添加标签
   - 标签管理：
     - 新建标签按钮
     - 标签列表（可删除）
     - 文字可以添加多个标签

**约束条件**：
- 收藏的文字可以在后续作品中快速使用
- 标签名称不能为空，最大20字符

##### 2.1.3.5 图片

**功能描述**：图片素材库

**功能项**：
1. **搜索图片**
   - 搜索框（文本输入，支持关键词搜索）
   - 搜索结果列表（缩略图展示）
   - 点击图片添加到画布

2. **收藏后按标签进行展示**
   - 收藏的图片按标签分类展示
   - 可以给图片添加标签

3. **收藏到文件夹**
   - 选中画布中的图片元素
   - 点击"收藏到文件夹"
   - 弹出文件夹选择对话框
   - 选择目标文件夹后保存

**约束条件**：
- 搜索支持关键词匹配图片名称和标签
- 收藏的图片可以在后续作品中快速使用

##### 2.1.3.6 背景

**功能描述**：背景设置和素材库

**功能项**：
1. **搜索背景**
   - 搜索框（文本输入，支持关键词搜索）
   - 搜索结果列表（缩略图展示）
   - 点击背景应用到当前画布

2. **设置背景颜色**
   - **纯色**
     - 点击后弹出颜色选择器
     - 选择颜色后应用到画布背景
   - **渐变**
     - 点击后弹出渐变编辑器
     - 设置渐变方向、颜色、角度
     - 应用到画布背景

3. **收藏后按标签进行展示**
   - 收藏的背景按标签分类展示

4. **收藏到文件夹**
   - 选中画布背景
   - 点击"收藏到文件夹"
   - 弹出文件夹选择对话框
   - 选择目标文件夹后保存

**约束条件**：
- 背景应用到当前画布的所有页面
- 收藏的背景可以在后续作品中快速使用

##### 2.1.3.7 工具 ✅

**功能描述**：AI辅助工具

**功能项**：
1. **小红书文案改写** ✅
   - **交互流程**：
     - 点击"小红书文案改写"按钮
     - 弹出文案改写左侧抽屉
     - ✅ 输入或粘贴原始文案
     - ✅ 修改提示词（可选，有默认提示词）
     - 点击"改写"按钮
     - ✅ 显示改写结果
     - ✅ 可以复制改写后的文案
   - **表单字段**：
     - ✅ 原始文案（文本域，必填，最大5000字符）
     - ✅ 提示词（文本输入框，可选，最大200字符，有默认值）
     - 改写按钮
     - 取消按钮
     - ✅ 改写结果（只读文本域）
     - ✅ 复制按钮
   - **约束条件**：
     - ✅ 原始文案不能为空
     - ✅ 改写过程中显示加载状态
     - ✅ 改写失败时显示错误提示
   - **技术实现**：集成通义千问 API（qwen-turbo 模型），支持 Token 使用统计

2. **AI生图** ✅
   - **交互流程**：
     - 点击"AI生图"按钮
     - 弹出AI生图左侧抽屉
     - ✅ 输入提示词
     - 点击"生成"按钮
     - ✅ 显示生成进度
     - ✅ 生成完成后，显示生成的图片
     - ✅ 可以应用到画布或保存到素材库
   - **表单字段**：
     - ✅ 提示词（文本输入框，必填，最大500字符）
     - 生成按钮
     - 取消按钮
     - ✅ 生成结果预览区
     - ✅ 应用到画布按钮
     - ✅ 保存到素材库按钮
   - **约束条件**：
     - ✅ 提示词不能为空
     - ✅ 生成过程中显示进度条
     - ✅ 生成失败时显示错误提示
     - ✅ 防重复提交：生成过程中按钮禁用
   - **技术实现**：集成通义万相 API（wanx-v1 模型），支持异步调用（当前为同步调用，需注意API限制）

**新增功能**：
- ✅ **AI使用统计**：在主页显示AI调用次数、Token使用量等统计信息
- ✅ **文章分页**：支持将文章内容自动分页到多个画布页面，支持手动调整分页

##### 2.1.3.8 铅笔工具 ❌

**功能描述**：手绘、自由线条绘制工具

**交互流程**：
1. 点击左侧栏"铅笔工具"按钮
2. 打开左侧抽屉（铅笔工具设置面板）
3. 在抽屉中设置参数
4. 点击"进入铅笔模式"按钮
5. 右侧栏切换为铅笔编辑栏
6. 在画布上绘制
7. 点击"退出铅笔模式"按钮 → 恢复右侧栏为画板编辑，退出绘制模式

**左侧抽屉内容**（铅笔工具设置面板）：

1. **自动平滑** ⚠️
   - **开关**：启用/禁用自动平滑
   - **滑块**：0-100%，控制线条的平滑程度
   - **功能说明**：
     - 数值越高，线条越圆润，减少手绘的抖动
     - 使用简化算法进行平滑处理
     - 实时预览平滑效果
   - **约束条件**：
     - 滑块范围：0-100%
     - 默认值：50%
     - 实时预览平滑效果

2. **绘制模式** ⚠️
   - **下拉选择**：
     - **自由绘制**（默认）：自由手绘线条
     - **直线绘制**：点击画板两点自动生成直线
   - **功能说明**：
     - 选择"直线绘制"时，点击画板两点自动生成直线
     - 可以连续绘制多条直线
     - 按 ESC 键或点击"退出直线模式"按钮退出直线绘制模式
   - **约束条件**：
     - 直线绘制模式下，每次点击两点生成一条直线
     - 可以连续绘制，无需重新选择模式

3. **进入/退出铅笔模式** ⚠️
   - **进入铅笔模式**按钮：
     - 点击后，右侧栏切换为铅笔编辑栏
     - 画布进入绘制模式
     - 左侧抽屉保持打开（用户可自行关闭）
   - **退出铅笔模式**按钮：
     - 点击后，退出绘制模式
     - 右侧栏恢复为画板编辑面板
     - 左侧抽屉保持打开（用户可自行关闭）

**右侧栏铅笔编辑栏**（进入铅笔模式后显示）：

**功能项列表**：

1. **线条颜色** ⚠️
   - **颜色选择器**：
     - 取色器（支持吸色功能）
     - 最近使用色板（显示最近使用的颜色）
   - **约束条件**：
     - 仅支持纯色，不支持渐变
     - 默认颜色：#000000（黑色）

2. **线条粗细** ⚠️
   - **滑块 + 输入框**：
     - 范围：1px - 50px
     - 单位固定为 px，无需切换
   - **约束条件**：
     - 最小值：1px
     - 最大值：50px
     - 默认值：2px

3. **线条端点** ⚠️
   - **图标选择**：
     - **圆头**（默认）：线条端点为圆形
     - **平头**：线条端点为方形
   - **约束条件**：
     - 默认选择圆头，更符合手绘的视觉感受

4. **线条样式** ⚠️
   - **下拉选择**：
     - **实线**（默认）
     - **虚线**
     - **点线**
   - **约束条件**：
     - 预设 3 种常用样式
     - 无自定义虚线，避免复杂

5. **透明度** ⚠️
   - **滑块 + 输入框**：
     - 范围：0-100%
   - **约束条件**：
     - 最小值：0%
     - 最大值：100%
     - 默认值：100%（完全不透明）
     - 控制整条线条的透明程度，方便叠加手绘效果

6. **清除线条** ⚠️
   - **按钮**：删除选中线条
   - **功能说明**：
     - 快捷操作，不用切到左侧工具栏的删除工具
     - 仅删除当前选中的线条对象
   - **约束条件**：
     - 必须选中线条对象才能删除
     - 删除前无需二次确认（快捷操作）

**技术实现说明**：
- 使用 Fabric.js 的 `freeDrawingBrush` 实现自由绘制
- 使用简化算法（如 Douglas-Peucker 算法）实现线条平滑
- 直线绘制模式需要自定义实现（点击两点生成直线）
- 实时预览平滑效果需要在绘制过程中实时处理

**约束条件**：
- 铅笔工具绘制的内容为路径对象（Path）
- 绘制完成后，线条对象可以选中、移动、删除
- 退出铅笔模式后，可以正常编辑已绘制的线条
- 左侧抽屉可以随时打开/关闭，不影响绘制模式

#### 2.1.4 页面右边导航

##### 2.1.4.1 画板编辑

**功能描述**：画板页面管理功能

**功能项**：
1. **格式刷**
   - **交互流程**：
     - 按下格式刷按钮后，可以将选中的样式复制
     - 点击画布中的其他元素，直接应用复制的样式
     - 再次点击格式刷按钮取消格式刷模式
   - **约束条件**：
     - 格式刷模式下，鼠标指针显示为格式刷图标
     - 只能复制样式，不能复制内容

2. **新建**
   - **交互流程**：
     - 点击"新建"按钮
     - 在现有页面的下面新增一个画板
     - 新画板使用默认尺寸（与第一个画板相同）
     - 新画板自动处于选中状态
   - **约束条件**：
     - 最多支持20个画板
     - 超过限制时提示用户

3. **删除**
   - **交互流程**：
     - 选中要删除的画板
     - 点击"删除"按钮
     - 弹出确认对话框："确定要删除此画板吗？删除后不可恢复。"
     - 确认后删除画板
   - **约束条件**：
     - 至少保留一个画板，不能全部删除
     - 删除前必须二次确认
     - 删除后不可恢复（但可通过历史记录后退）

4. **尺寸调整**
   - **交互流程**：
     - 点击"尺寸调整"按钮
     - 弹出尺寸设置对话框
     - 选择预设尺寸或自定义尺寸
     - 应用到当前选中的画板
   - **表单字段**：
     - 预设尺寸（下拉选择，可选：手机、平板、电脑、自定义）
     - 宽度（数字输入框，必填，单位：px，范围：100-5000）
     - 高度（数字输入框，必填，单位：px，范围：100-5000）
     - 应用到所有画板（复选框）
     - 确定按钮
     - 取消按钮
   - **约束条件**：
     - 宽度和高度必须在有效范围内
     - 如果勾选"应用到所有画板"，所有画板尺寸统一调整

##### 2.1.4.2 文字编辑

**功能描述**：文字元素的属性编辑面板（当选中文字元素时显示）

**功能项列表**：

1. **设置该文字的图层**
   - **交互流程**：
     - 显示图层顺序控制按钮
     - 上移动：文字图层上移一层
     - 下移动：文字图层下移一层
     - 顶部：文字图层移到最上层
     - 底部：文字图层移到最下层
   - **约束条件**：无

2. **设置该文字的角度**
   - **交互流程**：
     - 角度输入框（数字输入，范围：0-360度）
     - 或使用角度调节滑块（0-360度）
     - 实时预览文字旋转效果
   - **约束条件**：
     - 角度值必须在0-360度范围内

3. **锁定/解锁**
   - **交互流程**：
     - 点击"锁定"按钮，文字元素被锁定，无法编辑和移动
     - 锁定后，按钮变为"解锁"
     - 点击"解锁"按钮，解除锁定
   - **状态切换**：
     - 锁定状态：元素无法编辑，显示锁定图标
     - 解锁状态：元素可以正常编辑

4. **复制**
   - **交互流程**：
     - 点击"复制"按钮
     - 复制文字元素到剪贴板
     - 可以在画布中粘贴（Ctrl+V或右键菜单）

5. **删除**
   - **交互流程**：
     - 点击"删除"按钮
     - 弹出确认对话框："确定要删除此文字元素吗？"
     - 确认后删除元素
   - **约束条件**：
     - 删除前必须二次确认
     - 删除后可通过历史记录后退恢复

6. **字体、字号**
   - **交互流程**：
     - 字体下拉选择框（显示系统可用字体列表）
     - 字号输入框（数字输入，范围：8-200px）
     - 或使用字号调节滑块
     - 实时预览效果
   - **约束条件**：
     - 字号必须在8-200px范围内

7. **加粗，变斜，加下划线，加删除线，竖版横版切换**
   - **交互流程**：
     - 加粗按钮（切换按钮，点击加粗/取消加粗）
     - 变斜按钮（切换按钮，点击变斜/取消变斜）
     - 加下划线按钮（切换按钮，点击加下划线/取消下划线）
     - 加删除线按钮（切换按钮，点击加删除线/取消删除线）
     - 竖版横版切换按钮（切换按钮，点击切换文字方向）
   - **状态切换**：
     - 每个按钮独立控制，可以组合使用
     - 按钮高亮表示该样式已应用

8. **段落左右，居中分散对齐**
   - **交互流程**：
     - 左对齐按钮
     - 居中按钮
     - 右对齐按钮
     - 分散对齐按钮
     - 点击按钮应用对应对齐方式
   - **约束条件**：
     - 多行文字才支持对齐功能

9. **字间距，字高**
   - **交互流程**：
     - 字间距输入框（数字输入，单位：px，范围：-50-100）
     - 字间距调节滑块
     - 字高输入框（数字输入，单位：px，范围：0.5-3.0）
     - 字高调节滑块
     - 实时预览效果
   - **约束条件**：
     - 字间距和字高必须在有效范围内

10. **文字颜色**
    - **交互流程**：
      - 点击颜色选择器
      - 弹出颜色选择面板
      - 选择颜色后应用到文字
      - 实时预览效果

11. **划重点**
    - **功能描述**：就是字下边3/5处设置颜色
    - **交互流程**：
      - 点击"划重点"按钮
      - 弹出颜色选择器
      - 选择颜色后，在文字下方3/5处显示颜色标记
      - 可以取消划重点（再次点击或选择透明色）

12. **填充**
    - **交互流程**：
      - 点击"填充"按钮
      - 弹出填充设置面板
      - 选择填充类型（纯色、渐变、图片）
      - 设置填充属性
      - 应用到文字背景
      - 实时预览效果

13. **描边**
    - **交互流程**：
      - 点击"描边"按钮
      - 弹出描边设置面板
      - 描边颜色选择器
      - 描边宽度输入框（数字输入，单位：px，范围：0-50）
      - 描边样式选择（实线、虚线、点线）
      - 实时预览效果
    - **约束条件**：
      - 描边宽度必须在0-50px范围内

14. **投影**
    - **交互流程**：
      - 点击"投影"按钮
      - 弹出投影设置面板
      - 投影颜色选择器
      - 投影模糊度输入框（数字输入，单位：px，范围：0-50）
      - 投影偏移X输入框（数字输入，单位：px，范围：-100-100）
      - 投影偏移Y输入框（数字输入，单位：px，范围：-100-100）
      - 实时预览效果
    - **约束条件**：
      - 各参数必须在有效范围内

15. **透明度**
    - **交互流程**：
      - 透明度输入框（数字输入，范围：0-100，单位：%）
      - 或使用透明度调节滑块
      - 实时预览效果
    - **约束条件**：
      - 透明度必须在0-100%范围内

16. **尺寸**
    - **交互流程**：
      - 宽度输入框（数字输入，单位：px，范围：10-5000）
      - 高度输入框（数字输入，单位：px，范围：10-5000）
      - 锁定宽高比复选框
      - 实时预览效果
    - **约束条件**：
      - 宽度和高度必须在有效范围内
      - 锁定宽高比后，调整一个维度，另一个维度按比例调整

17. **位置XY**
    - **交互流程**：
      - X坐标输入框（数字输入，单位：px）
      - Y坐标输入框（数字输入，单位：px）
      - 或直接在画布中拖拽元素调整位置
      - 实时更新坐标值
    - **约束条件**：
      - 坐标值可以为负数（元素可以移出画布可见区域）

18. **格式刷，针对文字**
    - **交互流程**：
      - 按下格式刷按钮后，可以将选中的文字样式复制
      - 点击画布中的其他文字元素，直接应用复制的样式
      - 再次点击格式刷按钮取消格式刷模式
    - **约束条件**：
      - 只能复制文字样式，不能复制文字内容

##### 2.1.4.3 图片编辑

**功能描述**：图片元素的属性编辑面板（当选中图片元素时显示）

**功能项列表**：

1. **设置图片的图层**
   - **交互流程**：
     - 显示图层顺序控制按钮
     - 上移动：图片图层上移一层
     - 下移动：图片图层下移一层
     - 顶部：图片图层移到最上层
     - 底部：图片图层移到最下层
   - **约束条件**：无

2. **设置该图片的角度**
   - **交互流程**：
     - 角度输入框（数字输入，范围：0-360度）
     - 或使用角度调节滑块（0-360度）
     - 实时预览图片旋转效果
   - **约束条件**：
     - 角度值必须在0-360度范围内

3. **锁定/解锁**
   - **交互流程**：
     - 点击"锁定"按钮，图片元素被锁定，无法编辑和移动
     - 锁定后，按钮变为"解锁"
     - 点击"解锁"按钮，解除锁定
   - **状态切换**：
     - 锁定状态：元素无法编辑，显示锁定图标
     - 解锁状态：元素可以正常编辑

4. **格式刷，针对文字**
   - **交互流程**：
     - 按下格式刷按钮后，可以将选中的图片样式复制
     - 点击画布中的其他图片元素，直接应用复制的样式
     - 再次点击格式刷按钮取消格式刷模式
   - **约束条件**：
     - 只能复制图片样式，不能复制图片内容

5. **删除**
   - **交互流程**：
     - 点击"删除"按钮
     - 弹出确认对话框："确定要删除此图片元素吗？"
     - 确认后删除元素
   - **约束条件**：
     - 删除前必须二次确认
     - 删除后可通过历史记录后退恢复

6. **复制**
   - **交互流程**：
     - 点击"复制"按钮
     - 复制图片元素到剪贴板
     - 可以在画布中粘贴（Ctrl+V或右键菜单）

7. **替换图片**
   - **交互流程**：
     - 点击"替换图片"按钮
     - 弹出文件选择对话框
     - 选择新图片文件
     - 替换当前图片，保持原有尺寸和位置
   - **约束条件**：
     - 仅支持图片格式（JPG、PNG、GIF）
     - 文件大小不超过10MB

8. **填充**
   - **交互流程**：
     - 点击"填充"按钮
     - 弹出填充设置面板
     - 选择填充类型（纯色、渐变）
     - 设置填充属性
     - 应用到图片背景（如果图片有透明区域）
     - 实时预览效果

9. **图片** ✅
   - **功能描述**：图片编辑工具集合
   - **功能项**：
     1. **裁剪** ✅
        - 点击后进入裁剪模式
        - ✅ 显示裁剪框，可以调整裁剪区域
        - ✅ 确认裁剪后应用
        - ✅ 取消裁剪恢复原图
     2. **魔法棒抠图** ✅
        - 点击后进入抠图模式
        - ✅ 使用魔法棒工具选择要保留或删除的区域
        - ✅ 支持容差调节
        - ✅ 支持删除模式和保留模式切换
        - ✅ 确认后应用抠图效果
     3. **调色** ✅
        - 点击后弹出调色面板
        - ✅ 亮度调节（-100到100）
        - ✅ 对比度调节（-100到100）
        - ✅ 饱和度调节（-100到100）
        - ✅ 色温调节（-100到100）
        - ✅ 实时预览效果
     4. **消除某个区域** ✅
        - 点击后进入消除模式
        - ✅ 使用画笔工具选择要消除的区域
        - ✅ 支持智能填充和颜色填充两种模式
        - ✅ 支持画笔大小调节
        - ✅ 确认后应用效果

10. **描边**
    - **交互流程**：
      - 点击"描边"按钮
      - 弹出描边设置面板
      - 描边颜色选择器
      - 描边宽度输入框（数字输入，单位：px，范围：0-50）
      - 描边样式选择（实线、虚线、点线）
      - 实时预览效果
    - **约束条件**：
      - 描边宽度必须在0-50px范围内

11. **投影**
    - **交互流程**：
      - 点击"投影"按钮
      - 弹出投影设置面板
      - 投影颜色选择器
      - 投影模糊度输入框（数字输入，单位：px，范围：0-50）
      - 投影偏移X输入框（数字输入，单位：px，范围：-100-100）
      - 投影偏移Y输入框（数字输入，单位：px，范围：-100-100）
      - 实时预览效果
    - **约束条件**：
      - 各参数必须在有效范围内

12. **透明度**
    - **交互流程**：
      - 透明度输入框（数字输入，范围：0-100，单位：%）
      - 或使用透明度调节滑块
      - 实时预览效果
    - **约束条件**：
      - 透明度必须在0-100%范围内

13. **尺寸**
    - **交互流程**：
      - 宽度输入框（数字输入，单位：px，范围：10-5000）
      - 高度输入框（数字输入，单位：px，范围：10-5000）
      - 锁定宽高比复选框（默认勾选）
      - 实时预览效果
    - **约束条件**：
      - 宽度和高度必须在有效范围内
      - 锁定宽高比后，调整一个维度，另一个维度按比例调整

14. **位置XY**
    - **交互流程**：
      - X坐标输入框（数字输入，单位：px）
      - Y坐标输入框（数字输入，单位：px）
      - 或直接在画布中拖拽元素调整位置
      - 实时更新坐标值
    - **约束条件**：
      - 坐标值可以为负数（元素可以移出画布可见区域）

#### 2.1.5 页面中间编辑区

##### 2.1.5.1 主渲染区

**功能描述**：画布主编辑区域，显示和编辑画板内容

**交互功能**：

1. **拖动任意元素**
   - 鼠标点击元素后，可以拖动元素到任意位置
   - 拖动过程中显示元素轮廓
   - 释放鼠标后，元素移动到新位置
   - 实时更新右侧属性栏的位置坐标

2. **拖拉调整元素大小**
   - 选中元素后，显示8个控制点（四角和四边中点）
   - 拖动控制点可以调整元素大小
   - 按住Shift键拖动，保持宽高比
   - 实时更新右侧属性栏的尺寸信息

3. **点击图片**
   - 点击图片元素后，图片被选中
   - 右侧属性栏切换到图片编辑面板
   - 显示图片的右键菜单（如果右键点击）
   - **右键菜单项**：
     - 保存到素材
     - 设置为背景
     - 格式刷
     - 复制
     - 剪切
     - 复制/粘贴样式
     - 图层顺序
     - 锁定
     - 下载
     - 删除

4. **点击文字**
   - 点击文字元素后，文字被选中
   - 右侧属性栏切换到文字编辑面板
   - 可以进入文字编辑模式（双击或按F2）
   - 显示文字的右键菜单（如果右键点击）
   - **右键菜单项**：
     - 保存到素材
     - 设置为背景
     - 格式刷
     - 复制
     - 剪切
     - 复制/粘贴样式
     - 图层顺序
     - 锁定
     - 下载
     - 删除

5. **点击组**
   - 点击组合元素后，整个组被选中
   - 可以整体移动和调整大小
   - 显示组的右键菜单（如果右键点击）
   - **右键菜单项**：
     - 保存到素材
     - 拆分组
     - 组合
     - 设置为背景
     - 格式刷
     - 复制
     - 剪切
     - 复制/粘贴样式
     - 图层顺序
     - 锁定
     - 下载
     - 删除

**约束条件**：
- 元素可以移出画布可见区域
- 多个元素可以组合成组
- 组合的元素可以拆分组
- 右键菜单根据选中的元素类型动态显示

##### 2.1.5.2 画布横区

**功能描述**：画板页面管理区域

**交互流程**：
- 在主渲染区下方显示所有画板的缩略图
- 可以新增画布：点击"+"按钮，在最后添加新画板
- 可以删除画板：点击画板缩略图的删除按钮，弹出确认对话框
- 可以调整顺序：拖拽画板缩略图调整画板顺序
- 点击画板缩略图，切换到对应画板进行编辑

**约束条件**：
- 至少保留一个画板
- 最多支持20个画板
- 删除画板前必须二次确认

##### 2.1.5.3 图层弹框

**功能描述**：图层管理面板

**交互流程**：
- 单击图层按钮出现图层弹框，再点击消失
- 图层弹框出现在左侧，覆盖左侧导航栏
- 显示所有图层的层级关系（树形结构）
- 可以拖拽图层调整顺序
- 点击图层名称，选中对应元素
- 可以展开/折叠图层组
- 可以重命名图层（双击图层名称）
- 可以删除图层（右键菜单或删除按钮）
- 可以锁定/解锁图层（点击锁定图标）

**约束条件**：
- 图层顺序影响元素的显示层级
- 删除图层前必须二次确认
- 锁定图层后，该图层元素无法编辑

---

## 三、展示模块

### 3.1 我的作品展示 ✅

**功能描述**：作品列表展示页面，用于浏览和管理所有作品

#### 3.1.1 页面布局 ✅

页面采用卡片网格布局，支持筛选和搜索功能。

**新增功能**：
- ✅ **AI使用统计**：在页面顶部显示通义千问 AI 使用统计信息
  - 总调用次数
  - 输入 Token、输出 Token、总 Token
  - 按模型统计（qwen-turbo、qwen-plus等）
  - 按功能类型统计（文案改写、AI生图）

#### 3.1.2 搜索条件 ✅

**搜索字段**：
1. **文件夹筛选**（下拉选择，可选）✅
   - ✅ 显示所有文件夹列表
   - ✅ 选择文件夹后，只显示该文件夹下的作品
   - ✅ 支持"全部"选项，显示所有作品

2. **标签筛选**（多选标签，可选）✅
   - ✅ 显示所有标签列表
   - ✅ 可以多选标签
   - ✅ 选择标签后，显示包含任一选中标签的作品

3. **关键词搜索**（文本输入框，可选）✅
   - ✅ 支持作品名称模糊搜索
   - ✅ 实时搜索（输入后自动筛选）
   - ✅ 支持清空搜索

4. **排序** ✅
   - ✅ 支持按修改时间排序（正序/倒序）
   - ✅ 支持按创建时间排序（正序/倒序）
   - ✅ 默认按修改时间倒序

**约束条件**：
- ✅ 多个筛选条件可以组合使用
- ✅ 筛选条件之间是"且"的关系（文件夹AND标签AND关键词）

#### 3.1.3 列表展示

**展示方式**：
- **所有作品平铺**：卡片网格布局，每个作品显示为一张卡片
- 卡片信息：
  - 作品缩略图（第一页的预览图）
  - 作品名称
  - 创建时间
  - 修改时间
  - 标签列表（最多显示3个，超出显示"...")
  - 文件夹名称（如果有）

**列表字段**：
1. **作品缩略图**（图片，只读）
   - 显示作品第一页的预览图
   - 点击缩略图，打开作品编辑页面

2. **作品名称**（文本，只读）
   - 显示作品名称
   - 点击作品名称，打开作品编辑页面
   - 支持重命名（双击或右键菜单）

3. **创建时间**（日期时间，只读）
   - 格式：YYYY-MM-DD HH:mm
   - 显示作品创建时间

4. **修改时间**（日期时间，只读）
   - 格式：YYYY-MM-DD HH:mm
   - 显示作品最后修改时间

5. **标签列表**（标签组，只读）
   - 显示作品的所有标签
   - 最多显示3个标签，超出显示"..."
   - 点击标签，按该标签筛选作品

6. **文件夹名称**（文本，只读）
   - 显示作品所在的文件夹
   - 如果没有文件夹，显示"未分类"
   - 点击文件夹名称，按该文件夹筛选作品

**操作按钮**（每个作品卡片）：
1. **编辑**（按钮）✅
   - ✅ 点击后打开作品编辑页面
   - ✅ 在当前窗口打开（使用 HashRouter 路由）

2. **重命名**（按钮或右键菜单项）✅
   - ✅ 点击后弹出重命名对话框
   - ✅ 输入新名称后，点击确定保存
   - 表单字段：
     - ✅ 作品名称（文本输入框，必填，最大50字符）
   - 约束条件：
     - ✅ 作品名称不能为空
     - ✅ 作品名称不能与同文件夹下的其他作品重复

3. **移动**（按钮或右键菜单项）✅
   - ✅ 点击后弹出文件夹选择对话框
   - ✅ 选择目标文件夹
   - ✅ 确认后移动作品到目标文件夹

4. **添加标签**（按钮或右键菜单项）✅
   - ✅ 点击后弹出标签选择对话框
   - ✅ 可以添加已有标签或新建标签
   - 表单字段：
     - ✅ 标签列表（多选，显示所有标签）
     - ✅ 新建标签输入框（文本输入，最大20字符）
     - 确定按钮
     - 取消按钮

5. **删除**（按钮或右键菜单项）✅
   - ✅ 点击后弹出确认对话框："确定要删除此作品吗？删除后不可恢复。"
   - ✅ 确认后删除作品
   - 约束条件：
     - ✅ 删除前必须二次确认
     - ⚠️ 删除后不可恢复（回收站功能待实现）

6. **复制**（按钮或右键菜单项）✅
   - ✅ 点击后创建作品副本
   - ✅ 副本命名为"原作品名_副本"
   - ✅ 副本与原作品独立

**批量操作** ⚠️：
- ✅ 支持多选作品（复选框）
- ⚠️ 批量操作按钮（部分实现）：
  - ⚠️ 批量移动（待实现）
  - ⚠️ 批量添加标签（待实现）
  - ⚠️ 批量删除（待实现）
- 批量操作前必须确认

**分页** ✅：
- ✅ 每页显示20个作品（可配置）
- ✅ 分页控件：上一页、下一页、页码跳转
- ✅ 显示总作品数和当前页范围

**排序** ✅：
- ✅ 默认排序：按修改时间倒序（最新修改的在前面）
- ✅ 可选排序方式：
  - ✅ 按创建时间倒序
  - ✅ 按创建时间正序
  - ✅ 按修改时间倒序（默认）
  - ✅ 按修改时间正序
  - ⚠️ 按作品名称正序（待实现）
  - ⚠️ 按作品名称倒序（待实现）

**空态处理**：
- 如果没有作品，显示空态提示："还没有作品，点击创建新作品开始吧！"
- 显示"创建新作品"按钮

**异常处理**：
- 加载失败时显示错误提示："加载失败，请刷新重试"
- 显示"刷新"按钮

---

## 四、模版模块 ✅

### 4.1 模版展示 ✅

**功能描述**：模版列表展示页面，用于浏览和管理所有模版

#### 4.1.1 页面布局

页面采用卡片网格布局，与作品展示页面类似。

#### 4.1.2 搜索条件

**搜索字段**：
1. **标签筛选**（多选标签，可选）
   - 显示所有标签列表
   - 可以多选标签
   - 选择标签后，显示包含任一选中标签的模版

2. **关键词搜索**（文本输入框，可选）
   - 支持模版名称模糊搜索
   - 实时搜索（输入后自动筛选）

**约束条件**：
- 多个筛选条件可以组合使用

#### 4.1.3 列表展示

**展示方式**：
- 卡片网格布局，每个模版显示为一张卡片
- 卡片信息：
  - 模版缩略图
  - 模版名称
  - 创建时间
  - 标签列表（最多显示3个）

**列表字段**：
1. **模版缩略图**（图片，只读）
   - 显示模版的预览图
   - 点击缩略图，预览模版详情

2. **模版名称**（文本，只读）
   - 显示模版名称
   - 支持重命名（双击或右键菜单）

3. **创建时间**（日期时间，只读）
   - 格式：YYYY-MM-DD HH:mm
   - 显示模版创建时间

4. **标签列表**（标签组，只读）
   - 显示模版的所有标签
   - 最多显示3个标签，超出显示"..."
   - 点击标签，按该标签筛选模版

**操作按钮**（每个模版卡片）：
1. **应用**（按钮）✅
   - ✅ 点击后弹出确认对话框："应用此模版将替换当前作品的样式（背景、文字样式），元素和图片保持不变。是否继续？"
   - ✅ 确认后，在当前编辑页面应用模版
   - ✅ 如果当前没有打开的编辑页面，提示用户先创建或打开作品

2. **预览**（按钮）✅
   - ✅ 点击后打开模版预览对话框
   - ✅ 显示模版的完整预览图
   - ✅ 可以放大查看

3. **重命名**（按钮或右键菜单项）✅
   - ✅ 点击后弹出重命名对话框
   - ✅ 输入新名称后，点击确定保存
   - 表单字段：
     - ✅ 模版名称（文本输入框，必填，最大50字符）
   - 约束条件：
     - ✅ 模版名称不能为空
     - ✅ 模版名称不能与其他模版重复

4. **添加标签**（按钮或右键菜单项）✅
   - ✅ 点击后弹出标签选择对话框
   - ✅ 可以添加已有标签或新建标签
   - 表单字段：
     - ✅ 标签列表（多选，显示所有标签）
     - ✅ 新建标签输入框（文本输入，最大20字符）
     - 确定按钮
     - 取消按钮

5. **删除**（按钮或右键菜单项）✅
   - ✅ 点击后弹出确认对话框："确定要删除此模版吗？删除后不可恢复。"
   - ✅ 确认后删除模版
   - 约束条件：
     - ✅ 删除前必须二次确认
     - ✅ 删除后不可恢复

#### 4.1.4 新增模版

**功能描述**：将当前作品保存为模版

**交互流程**：
- 在作品编辑页面，点击"保存为模版"按钮（在文件菜单或顶部工具栏）
- 弹出保存模版对话框
- 填写模版信息
- 点击"保存"按钮
- 保存成功后，模版添加到模版列表

**表单字段**：
1. **模版名称**（文本输入框，必填，最大50字符）
   - 模版的名称
   - 不能为空
   - 不能与其他模版重复

2. **标签**（多选标签，可选）
   - 可以选择已有标签或新建标签
   - 可以添加多个标签

3. **模版预览图**（图片，自动生成）
   - 自动截取作品第一页作为预览图
   - 可以手动上传替换

4. **保存按钮**
5. **取消按钮**

**约束条件**：
- 模版名称必填，不能为空
- 模版名称不能与其他模版重复
- 保存成功后，模版立即在模版列表中显示
- 防重复提交：保存过程中按钮禁用

**修改模版**

**功能描述**：修改已有模版的信息

**交互流程**：
- 在模版列表中，点击模版的"修改"按钮
- 弹出修改模版对话框
- 修改模版信息
- 点击"保存"按钮
- 保存成功后，模版信息更新

**表单字段**：
- 与新增模版相同

**约束条件**：
- 模版名称不能与其他模版重复（排除自己）
- 其他约束与新增模版相同

**删除模版**

**功能描述**：删除模版

**交互流程**：
- 在模版列表中，点击模版的"删除"按钮
- 弹出确认对话框："确定要删除此模版吗？删除后不可恢复。"
- 确认后删除模版
- 删除成功后，模版从列表中移除

**约束条件**：
- 删除前必须二次确认
- 删除后不可恢复
- 删除失败时显示错误提示

---

## 五、素材模块 ✅

### 5.1 素材管理 ✅

**功能描述**：素材库管理页面，用于管理所有素材（图片、文字、背景等）

#### 5.1.1 页面布局 ✅

页面采用标签页布局，不同素材类型分别管理：
- ✅ 图片素材
- ✅ 文字素材
- ✅ 背景素材
- ✅ 元素素材

#### 5.1.2 功能项

##### 5.1.2.1 上传 ✅

**功能描述**：上传素材到素材库

**交互流程**：
- ✅ 点击"上传"按钮
- ✅ 弹出文件选择对话框
- ✅ 选择文件（支持多选）
- ✅ 上传文件
- ✅ 上传成功后，素材添加到素材库

**表单字段**（上传对话框）：
1. **文件选择**（文件选择器，必填）✅
   - ✅ 支持多选文件
   - ✅ 支持的文件类型根据素材类型而定：
     - ✅ 图片素材：JPG、PNG、GIF
     - ✅ 文字素材：不支持上传（只能从作品收藏）
     - ✅ 背景素材：JPG、PNG、GIF
     - ✅ 元素素材：SVG、PNG

2. **上传进度**（进度条，只读）⚠️
   - ⚠️ 显示上传进度（部分实现）
   - ⚠️ 多文件上传时，显示总体进度和单个文件进度（待完善）

3. **上传按钮** ✅
4. **取消按钮** ✅

**约束条件**：
- ✅ 文件格式必须符合要求
- ✅ 单个文件大小不超过10MB
- ✅ 上传失败时显示错误提示和失败原因
- ✅ 防重复提交：上传过程中按钮禁用

##### 5.1.2.2 打标签 ⚠️

**功能描述**：给素材添加标签

**交互流程**：
- ⚠️ 选中素材（单选或多选，部分实现）
- ⚠️ 点击"打标签"按钮（功能待完善）
- 弹出标签选择对话框
- ✅ 选择已有标签或新建标签
- 点击"确定"按钮
- ✅ 标签添加到选中素材

**表单字段**（标签选择对话框）：
1. **标签列表**（多选，可选）✅
   - ✅ 显示所有已有标签
   - ✅ 可以多选标签

2. **新建标签**（文本输入框，可选，最大20字符）✅
   - ✅ 输入新标签名称
   - ✅ 新建的标签自动添加到选中素材

3. **确定按钮** ✅
4. **取消按钮** ✅

**约束条件**：
- ✅ 标签名称不能为空
- ✅ 标签名称最大20字符
- ✅ 可以给素材添加多个标签
- ⚠️ 批量操作时，所有选中素材都添加相同标签（待完善）

##### 5.1.2.3 元数据分类 ⚠️

**功能描述**：素材的元数据管理和分类

**交互流程**：
- ⚠️ 点击"元数据分类"按钮（功能待实现）
- 打开素材分类管理页面
- ⚠️ 可以按文件夹、标签、类型等分类查看素材（部分实现）
- ⚠️ 可以编辑素材的元数据信息（部分实现）

**分类方式**：
1. **按文件夹分类**
   - 显示文件夹树形结构
   - 点击文件夹，显示该文件夹下的素材
   - 可以新建、重命名、删除文件夹
   - 可以移动素材到不同文件夹

2. **按标签分类**
   - 显示所有标签列表
   - 点击标签，显示包含该标签的素材
   - 可以管理标签（新建、删除、重命名）

3. **按类型分类**
   - 图片、文字、背景、元素分别显示
   - 可以切换查看不同类型

4. **按时间分类**
   - 按上传时间分类
   - 今天、本周、本月、更早

**元数据字段**（素材详情）：
1. **素材名称**（文本，可编辑）
   - 素材的名称
   - 可以重命名

2. **素材类型**（文本，只读）
   - 图片、文字、背景、元素

3. **文件大小**（数字，只读）
   - 单位：KB或MB

4. **上传时间**（日期时间，只读）
   - 格式：YYYY-MM-DD HH:mm

5. **标签列表**（标签组，可编辑）
   - 显示素材的所有标签
   - 可以添加、删除标签

6. **文件夹**（下拉选择，可编辑）
   - 显示素材所在的文件夹
   - 可以移动到其他文件夹

7. **使用次数**（数字，只读）
   - 显示素材被使用的次数

**约束条件**：
- 素材名称不能为空
- 文件夹名称不能重复
- 删除文件夹前，必须将文件夹内的素材移出或删除

---

## 六、通用功能与约束

### 6.1 权限管理 ⚠️

**角色定义**：
- ⚠️ **普通用户**：可以创建、编辑、删除自己的作品和模版（当前为单用户模式）
- ⚠️ **管理员**：拥有所有权限，可以管理所有用户的作品和模版（待实现）

**权限约束**：
- ⚠️ 用户只能编辑和删除自己创建的作品和模版（当前为单用户模式，所有数据共享）
- ⚠️ 管理员可以编辑和删除所有作品和模版（待实现）
- ✅ 素材库对所有用户可见，但用户只能管理自己上传的素材（当前为单用户模式）

### 6.2 状态管理

**作品状态**：
- **草稿**：未保存的作品
- **已保存**：已保存的作品
- **已发布**：已发布的作品（如果支持发布功能）

**状态转换**：
- 草稿 → 已保存：点击保存按钮
- 已保存 → 草稿：修改作品后未保存
- 已保存 → 已发布：点击发布按钮（如果支持）

**模版状态**：
- **启用**：模版可以使用
- **停用**：模版暂时不可用（仅管理员可以停用）

**状态转换**：
- 启用 → 停用：管理员操作
- 停用 → 启用：管理员操作

### 6.3 删除限制

**作品删除限制**：
- ⚠️ 已发布的作品不能直接删除，需要先取消发布（发布功能待实现）
- ✅ 删除作品前必须二次确认
- ⚠️ 删除的作品可以放入回收站，支持恢复（30天内）（回收站功能待实现）

**模版删除限制**：
- 删除模版前必须二次确认
- 删除的模版不能恢复

**素材删除限制**：
- ⚠️ 如果素材正在被作品使用，删除前提示用户（使用检测功能待实现）
- ✅ 删除素材前必须二次确认
- ⚠️ 删除的素材可以放入回收站，支持恢复（30天内）（回收站功能待实现）

### 6.4 数据校验

**通用校验规则**：
- 所有必填字段不能为空
- 文本字段长度限制：
  - 作品名称：最大50字符
  - 模版名称：最大50字符
  - 文件夹名称：最大30字符
  - 标签名称：最大20字符
- 数字字段范围校验：
  - 角度：0-360度
  - 透明度：0-100%
  - 尺寸：10-5000px
- 文件格式校验：
  - 图片：JPG、PNG、GIF
  - 文件大小：单个文件最大10MB

**错误提示**：
- 所有校验失败时，显示明确的错误提示
- 错误提示显示在对应字段下方
- 提交按钮在存在错误时禁用

### 6.5 交互规范

**按钮交互**：
- 所有操作按钮都有明确的文字或图标标识
- 危险操作（删除、清空等）使用红色或警告色
- 主要操作按钮突出显示
- 按钮禁用时显示为灰色，不可点击

**弹窗交互**：
- 所有弹窗都有明确的标题
- 弹窗都有关闭按钮（右上角X）
- 弹窗可以通过点击遮罩层关闭（确认类弹窗除外）
- 弹窗内容过多时，支持滚动

**表单交互**：
- 所有表单都有明确的提交和取消按钮
- 提交按钮在表单底部右侧
- 取消按钮在表单底部左侧
- 表单提交时，显示加载状态
- 表单提交成功后，自动关闭弹窗并刷新列表

**列表交互**：
- 列表支持分页，每页20条（可配置）
- 列表默认按创建时间倒序排列
- 列表支持多选和批量操作
- 列表为空时显示空态提示
- 列表加载失败时显示错误提示和重试按钮

---

## 七、技术实现说明

### 7.1 路由系统 ✅

- **实现方式**：使用 `HashRouter` 而非 `BrowserRouter`
- **原因**：适配 Electron 环境，`file://` 协议下 `BrowserRouter` 无法正常工作
- **路由路径**：
  - `#/` - 主页（作品展示）
  - `#/editor` - 编辑器（新建作品）
  - `#/editor/:id` - 编辑器（编辑指定作品）
  - `#/template` - 模版管理
  - `#/material` - 素材管理

### 7.2 API 配置 ✅

- **开发环境**：使用相对路径 `/api`
- **生产环境（Electron）**：自动检测并使用 `http://localhost:3000/api`
- **检测方式**：通过 `window.location.protocol === 'file:'` 判断

### 7.3 后端服务 ✅

- **启动方式**：Electron 主进程自动启动后端 Node.js 服务
- **端口**：3000
- **数据库**：SQLite（Prisma ORM）
- **文件存储**：本地文件系统

### 7.4 新增功能说明

#### 7.4.1 文章分页功能 ✅

- **功能描述**：支持将长文章自动分页到多个画布页面
- **实现方式**：
  - 支持 HTML 内容分页和纯文本分页
  - 自动计算内容高度，智能分页
  - 支持手动调整分页（合并、拆分页面）
  - 支持导出分页后的内容为图片（PNG/JPG）
- **使用场景**：公众号文章排版、长文本设计

#### 7.4.2 模板解析功能 ✅

- **功能描述**：分析模板内容，生成AI文案需求
- **实现方式**：
  - 自动识别模板中的文字段落和表情数量
  - 生成AI提示词
  - 支持用户输入文章内容，自动应用到模板
- **使用场景**：快速生成设计稿

#### 7.4.3 AI使用统计 ✅

- **功能描述**：统计AI功能的使用情况
- **统计维度**：
  - 总调用次数
  - Token 使用量（输入、输出、总计）
  - 按模型统计（qwen-turbo、wanx-v1等）
  - 按功能类型统计（文案改写、AI生图）
- **显示位置**：主页顶部

---

## 八、页面布局线框图

### 8.1 内容生成页面

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│ 顶部导航栏 (64px)                                                                           │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ [🏠] [文件 ▼] [◀] [▶] [导出 ▼]                                    [图层] [画布1] [画布2] │
│                                                                                               │
├──────────┬──────────────────────────────────────────────────────────────────┬───────────────┤
│          │                                                                  │               │
│          │                                                                  │  画板编辑     │
│          │                                                                  │  ┌─────────┐  │
│          │                                                                  │  │ 格式刷  │  │
│          │                                                                  │  │ 新建    │  │
│          │                                                                  │  │ 删除    │  │
│          │                                                                  │  │ 尺寸调整│  │
│          │                                                                  │  └─────────┘  │
│          │                                                                  │               │
│ 左侧导航 │                    主渲染区（画布编辑区）                        │  文字编辑     │
│          │                                                                  │  ┌─────────┐  │
│ ┌──────┐ │                                                                  │  │ 图层    │  │
│ │ 添加 │ │                                                                  │  │ 角度    │  │
│ │ 模版 │ │                                                                  │  │ 锁定    │  │
│ │ 元素 │ │                                                                  │  │ 复制    │  │
│ │ 文字 │ │                                                                  │  │ 删除    │  │
│ │ 图片 │ │                                                                  │  │ 字体    │  │
│ │ 背景 │ │                                                                  │  │ 字号    │  │
│ │ 工具 │ │                                                                  │  │ 加粗    │  │
│ └──────┘ │                                                                  │  │ 对齐    │  │
│          │                                                                  │  │ 颜色    │  │
│          │                                                                  │  │ 填充    │  │
│          │                                                                  │  │ 描边    │  │
│          │                                                                  │  │ 投影    │  │
│          │                                                                  │  │ 透明度  │  │
│          │                                                                  │  │ 尺寸    │  │
│          │                                                                  │  │ 位置XY  │  │
│          │                                                                  │  └─────────┘  │
│          │                                                                  │               │
│          │                                                                  │  图片编辑     │
│          │                                                                  │  (选中图片时) │
│          │                                                                  │               │
├──────────┴──────────────────────────────────────────────────────────────────┴───────────────┤
│ 画布横区                                                                                     │
│ [画板1缩略图] [画板2缩略图] [+] [删除] [拖拽调整顺序]                                      │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

**布局说明**：
- 顶部导航栏：固定高度64px，包含主页icon、文件菜单、前进/后退、导出功能
- 左侧导航栏：宽度240px，包含添加、模版、元素、文字、图片、背景、工具等功能入口
- 中间编辑区：自适应宽度，包含主渲染区（画布）和画布横区（画板管理）
- 右侧属性栏：宽度320px，根据选中元素类型动态显示对应的编辑面板（画板编辑/文字编辑/图片编辑）

---

### 8.2 我的作品展示页面

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│ 页面标题：我的作品                                                      [+ 新建作品]        │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 搜索筛选区                                                                                   │
│ ┌─────────────────────────────────────────────────────────────────────────────────────┐   │
│ │ 文件夹筛选: [全部 ▼]  标签筛选: [标签1] [标签2] [标签3]  搜索: [________] [🔍]    │   │
│ └─────────────────────────────────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 作品列表（卡片网格布局）                                                                     │
│ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐                        │
│ │              │ │              │ │              │ │              │                        │
│ │   作品缩略图  │ │   作品缩略图  │ │   作品缩略图  │ │   作品缩略图  │                        │
│ │              │ │              │ │              │ │              │                        │
│ ├──────────────┤ ├──────────────┤ ├──────────────┤ ├──────────────┤                        │
│ │ 作品名称      │ │ 作品名称      │ │ 作品名称      │ │ 作品名称      │                        │
│ │ 创建时间      │ │ 创建时间      │ │ 创建时间      │ │ 创建时间      │                        │
│ │ 修改时间      │ │ 修改时间      │ │ 修改时间      │ │ 修改时间      │                        │
│ │ [标签1][标签2]│ │ [标签1]       │ │ [标签1][标签2]│ │ [标签1]       │                        │
│ │ 文件夹: 设计  │ │ 文件夹: 未分类│ │ 文件夹: 营销  │ │ 文件夹: 未分类│                        │
│ │ [编辑][重命名]│ │ [编辑][重命名]│ │ [编辑][重命名]│ │ [编辑][重命名]│                        │
│ │ [移动][删除]  │ │ [移动][删除]  │ │ [移动][删除]  │ │ [移动][删除]  │                        │
│ └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘                        │
│                                                                                               │
│ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐                        │
│ │              │ │              │ │              │ │              │                        │
│ │   作品缩略图  │ │   作品缩略图  │ │   作品缩略图  │ │   作品缩略图  │                        │
│ │              │ │              │ │              │ │              │                        │
│ ├──────────────┤ ├──────────────┤ ├──────────────┤ ├──────────────┤                        │
│ │ 作品名称      │ │ 作品名称      │ │ 作品名称      │ │ 作品名称      │                        │
│ │ 创建时间      │ │ 创建时间      │ │ 创建时间      │ │ 创建时间      │                        │
│ │ 修改时间      │ │ 修改时间      │ │ 修改时间      │ │ 修改时间      │                        │
│ │ [标签1]       │ │ [标签1][标签2]│ │ [标签1]       │ │ [标签1][标签2]│                        │
│ │ 文件夹: 未分类│ │ 文件夹: 设计  │ │ 文件夹: 未分类│ │ 文件夹: 营销  │                        │
│ │ [编辑][重命名]│ │ [编辑][重命名]│ │ [编辑][重命名]│ │ [编辑][重命名]│                        │
│ │ [移动][删除]  │ │ [移动][删除]  │ │ [移动][删除]  │ │ [移动][删除]  │                        │
│ └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘                        │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 批量操作: [批量移动] [批量添加标签] [批量删除]                                               │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 排序: [按修改时间倒序 ▼]  分页: [◀ 上一页] [1] [2] [3] [下一页 ▶]  共 120 条，每页 20 条    │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

**布局说明**：
- 页面标题和新建按钮位于顶部
- 搜索筛选区包含文件夹筛选、标签筛选和关键词搜索
- 作品列表采用卡片网格布局，每行4个卡片（响应式适配）
- 每个卡片显示作品缩略图、名称、时间、标签、文件夹和操作按钮
- 底部包含批量操作、排序和分页控件

---

### 8.3 模版展示页面

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│ 页面标题：模版库                                                      [+ 保存为模版]        │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 搜索筛选区                                                                                   │
│ ┌─────────────────────────────────────────────────────────────────────────────────────┐   │
│ │ 标签筛选: [标签1] [标签2] [标签3]  搜索: [________] [🔍]                            │   │
│ └─────────────────────────────────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 模版列表（卡片网格布局）                                                                     │
│ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐                        │
│ │              │ │              │ │              │ │              │                        │
│ │   模版缩略图  │ │   模版缩略图  │ │   模版缩略图  │ │   模版缩略图  │                        │
│ │              │ │              │ │              │ │              │                        │
│ ├──────────────┤ ├──────────────┤ ├──────────────┤ ├──────────────┤                        │
│ │ 模版名称      │ │ 模版名称      │ │ 模版名称      │ │ 模版名称      │                        │
│ │ 创建时间      │ │ 创建时间      │ │ 创建时间      │ │ 创建时间      │                        │
│ │ [标签1][标签2]│ │ [标签1]       │ │ [标签1][标签2]│ │ [标签1]       │                        │
│ │ [应用][预览]  │ │ [应用][预览]  │ │ [应用][预览]  │ │ [应用][预览]  │                        │
│ │ [重命名][删除]│ │ [重命名][删除]│ │ [重命名][删除]│ │ [重命名][删除]│                        │
│ └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘                        │
│                                                                                               │
│ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐                        │
│ │              │ │              │ │              │ │              │                        │
│ │   模版缩略图  │ │   模版缩略图  │ │   模版缩略图  │ │   模版缩略图  │                        │
│ │              │ │              │ │              │ │              │                        │
│ ├──────────────┤ ├──────────────┤ ├──────────────┤ ├──────────────┤                        │
│ │ 模版名称      │ │ 模版名称      │ │ 模版名称      │ │ 模版名称      │                        │
│ │ 创建时间      │ │ 创建时间      │ │ 创建时间      │ │ 创建时间      │                        │
│ │ [标签1]       │ │ [标签1][标签2]│ │ [标签1]       │ │ [标签1][标签2]│                        │
│ │ [应用][预览]  │ │ [应用][预览]  │ │ [应用][预览]  │ │ [应用][预览]  │                        │
│ │ [重命名][删除]│ │ [重命名][删除]│ │ [重命名][删除]│ │ [重命名][删除]│                        │
│ └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘                        │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 分页: [◀ 上一页] [1] [2] [3] [下一页 ▶]  共 48 条，每页 20 条                                │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

**布局说明**：
- 页面标题和保存为模版按钮位于顶部
- 搜索筛选区包含标签筛选和关键词搜索
- 模版列表采用卡片网格布局，每行4个卡片
- 每个卡片显示模版缩略图、名称、创建时间、标签和操作按钮（应用、预览、重命名、删除）
- 底部包含分页控件

---

### 8.4 素材管理页面

```
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│ 页面标题：素材库                                                      [+ 上传素材]          │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 标签页导航                                                                                   │
│ [图片素材] [文字素材] [背景素材] [元素素材]                                                 │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 搜索筛选区                                                                                   │
│ ┌─────────────────────────────────────────────────────────────────────────────────────┐   │
│ │ 文件夹筛选: [全部 ▼]  标签筛选: [标签1] [标签2]  搜索: [________] [🔍]              │   │
│ │ [打标签] [元数据分类]                                                                 │   │
│ └─────────────────────────────────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 素材列表（网格布局）                                                                         │
│ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐         │
│ │          │ │          │ │          │ │          │ │          │ │          │         │
│ │  图片    │ │  图片    │ │  图片    │ │  图片    │ │  图片    │ │  图片    │         │
│ │  缩略图  │ │  缩略图  │ │  缩略图  │ │  缩略图  │ │  缩略图  │ │  缩略图  │         │
│ │          │ │          │ │          │ │          │ │          │ │          │         │
│ ├──────────┤ ├──────────┤ ├──────────┤ ├──────────┤ ├──────────┤ ├──────────┤         │
│ │ 素材名称  │ │ 素材名称  │ │ 素材名称  │ │ 素材名称  │ │ 素材名称  │ │ 素材名称  │         │
│ │ [标签1]   │ │ [标签1]   │ │ [标签1]   │ │ [标签1]   │ │ [标签1]   │ │ [标签1]   │         │
│ │ [编辑]    │ │ [编辑]    │ │ [编辑]    │ │ [编辑]    │ │ [编辑]    │ │ [编辑]    │         │
│ │ [删除]    │ │ [删除]    │ │ [删除]    │ │ [删除]    │ │ [删除]    │ │ [删除]    │         │
│ └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘         │
│                                                                                               │
│ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐         │
│ │          │ │          │ │          │ │          │ │          │ │          │         │
│ │  图片    │ │  图片    │ │  图片    │ │  图片    │ │  图片    │ │  图片    │         │
│ │  缩略图  │ │  缩略图  │ │  缩略图  │ │  缩略图  │ │  缩略图  │ │  缩略图  │         │
│ │          │ │          │ │          │ │          │ │          │ │          │         │
│ ├──────────┤ ├──────────┤ ├──────────┤ ├──────────┤ ├──────────┤ ├──────────┤         │
│ │ 素材名称  │ │ 素材名称  │ │ 素材名称  │ │ 素材名称  │ │ 素材名称  │ │ 素材名称  │         │
│ │ [标签1]   │ │ [标签1]   │ │ [标签1]   │ │ [标签1]   │ │ [标签1]   │ │ [标签1]   │         │
│ │ [编辑]    │ │ [编辑]    │ │ [编辑]    │ │ [编辑]    │ │ [编辑]    │ │ [编辑]    │         │
│ │ [删除]    │ │ [删除]    │ │ [删除]    │ │ [删除]    │ │ [删除]    │ │ [删除]    │         │
│ └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────┘         │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 批量操作: [批量打标签] [批量移动] [批量删除]                                                 │
├─────────────────────────────────────────────────────────────────────────────────────────────┤
│ 分页: [◀ 上一页] [1] [2] [3] [下一页 ▶]  共 156 条，每页 24 条                              │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

**布局说明**：
- 页面标题和上传素材按钮位于顶部
- 标签页导航用于切换不同素材类型（图片、文字、背景、元素）
- 搜索筛选区包含文件夹筛选、标签筛选、关键词搜索和批量操作按钮
- 素材列表采用网格布局，每行6个素材卡片（响应式适配）
- 每个卡片显示素材缩略图、名称、标签和操作按钮
- 底部包含批量操作和分页控件

---

### 8.5 保存模版对话框

```
┌─────────────────────────────────────────────────────────────┐
│ 保存为模版                                          [×]      │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  模版名称:                                                    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 请输入模版名称（必填，最大50字符）                    │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                               │
│  标签:                                                       │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ [标签1] [标签2] [标签3] [+ 添加标签]                  │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                               │
│  模版预览图:                                                 │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                                                       │   │
│  │            [模版预览图缩略图]                         │   │
│  │                                                       │   │
│  │            [上传新预览图]                             │   │
│  │                                                       │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│                                    [取消]  [保存]            │
└─────────────────────────────────────────────────────────────┘
```

---

### 8.6 导出对话框

```
┌─────────────────────────────────────────────────────────────┐
│ 导出作品                                          [×]        │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  导出格式:                                                    │
│  ○ PNG  ● PDF  ○ GIF                                         │
│                                                               │
│  画板页面选择:                                                │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ ☑ 全选                                               │   │
│  │                                                       │   │
│  │ ☑ [画板1缩略图]  画板1                               │   │
│  │ ☑ [画板2缩略图]  画板2                               │   │
│  │ ☐ [画板3缩略图]  画板3                               │   │
│  │                                                       │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                               │
│  导出进度: [████████░░░░░░░░░░] 50%                          │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│                                    [取消]  [开始导出]         │
└─────────────────────────────────────────────────────────────┘
```

---

### 8.7 文件夹选择对话框

```
┌─────────────────────────────────────────────────────────────┐
│ 选择文件夹                                        [×]        │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  文件夹树:                                                    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 📁 全部作品                                           │   │
│  │   ├─ 📁 设计作品                                      │   │
│  │   │   ├─ 📁 海报设计                                 │   │
│  │   │   └─ 📁 宣传单设计                               │   │
│  │   ├─ 📁 营销作品                                      │   │
│  │   └─ 📁 个人作品                                      │   │
│  │                                                       │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                               │
│  [新建文件夹]                                                 │
│                                                               │
├─────────────────────────────────────────────────────────────┤
│                                    [取消]  [确定]             │
└─────────────────────────────────────────────────────────────┘
```

---

### 8.8 图层弹框

```
┌─────────────────────────────────────────────────────────────┐
│ 图层管理                                          [×]        │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  图层列表:                                                    │
│  ┌─────────────────────────────────────────────────────┐   │
│  │ 🔓 文字元素1                              [↑][↓]    │   │
│  │ 🔒 图片元素1                              [↑][↓]    │   │
│  │ 📁 组合1                                  [↑][↓]    │   │
│  │   ├─ 🔓 文字元素2                        [↑][↓]    │   │
│  │   └─ 🔓 图片元素2                        [↑][↓]    │   │
│  │ 🔓 背景图层                              [↑][↓]    │   │
│  │                                                       │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                               │
│  [展开全部] [折叠全部]                                        │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

---

## 九、功能实现状态总结

### 9.1 已实现功能 ✅

#### 核心功能
- ✅ 作品创建、编辑、保存、删除
- ✅ 多页面画布管理（最多20页）
- ✅ 历史记录（前进/后退，支持50步）
- ✅ 导出功能（PNG、PDF、GIF格式）
- ✅ 模版管理（创建、应用、预览、删除）
- ✅ 素材管理（上传、标签、文件夹）
- ✅ AI功能（文案改写、AI生图、使用统计）

#### 编辑功能
- ✅ 文字编辑（字体、字号、颜色、对齐、描边、投影等）
- ✅ 图片编辑（裁剪、魔法棒抠图、调色、消除区域、描边、投影等）
- ✅ 图层管理（上移、下移、置顶、置底、锁定）
- ✅ 格式刷功能
- ✅ 元素复制、删除
- ✅ 画布缩放

#### 左侧栏功能
- ✅ 添加图片、文字
- ✅ 模版应用（支持搜索、标签筛选）
- ✅ 元素库（预设素材、自定义元素）
- ✅ 文字素材库
- ✅ 图片素材库（搜索、标签）
- ✅ 背景设置（搜索、纯色、渐变）
- ✅ AI工具（文案改写、AI生图）
- ✅ 模板解析（分析模板、生成AI提示词）
- ✅ 文章分页（自动分页、手动调整、导出）

#### 右侧栏功能
- ✅ 画板编辑（格式刷、新建、删除、尺寸调整）
- ✅ 文字属性编辑（完整功能）
- ✅ 图片属性编辑（完整功能）
- ✅ 图形属性编辑（形状、填充、描边等）
- ⚠️ 铅笔编辑（线条颜色、粗细、端点、样式、透明度、清除）

#### 作品管理
- ✅ 作品列表展示（卡片网格布局）
- ✅ 搜索筛选（文件夹、标签、关键词）
- ✅ 排序功能（按时间）
- ✅ 分页功能
- ✅ 作品操作（编辑、重命名、移动、标签、复制、删除）
- ✅ AI使用统计展示

### 9.2 部分实现功能 ⚠️

- ⚠️ **保存至**：UI已实现，但文件夹管理功能待完善
- ⚠️ **批量操作**：多选功能已实现，但批量移动、批量添加标签、批量删除待实现
- ⚠️ **元数据分类**：部分功能已实现，但完整的管理界面待完善
- ⚠️ **主页返回确认**：返回功能已实现，但未保存提示待完善
- ⚠️ **作品名称排序**：其他排序已实现，但名称排序待实现

### 9.3 待实现功能 ❌

#### 文件操作
- ❌ **创建副本**：功能待实现
- ❌ **保存至**：文件夹管理功能待完善
- ❌ **标尺与参考线**：显示/隐藏功能待实现

#### 文字功能
- ❌ **变形文字**：文字变形效果（弯曲、波浪等）待实现
- ❌ **3D文字**：3D立体效果待实现

#### 权限与回收站
- ❌ **权限管理**：多用户、角色管理待实现
- ❌ **回收站**：删除恢复功能待实现

#### 其他
- ❌ **发布功能**：作品发布功能待实现
- ❌ **使用检测**：素材使用情况检测待实现
- ⚠️ **铅笔工具**：手绘、自由线条绘制功能（部分实现）

### 9.4 技术特性

- ✅ **Electron 桌面应用**：支持打包为 Windows 可执行文件
- ✅ **HashRouter**：适配 Electron 环境的路由方案
- ✅ **自动后端启动**：Electron 主进程自动启动后端服务
- ✅ **相对路径资源**：前端资源使用相对路径，适配本地文件加载
- ✅ **AI Token 统计**：完整的 AI 使用量统计功能
- ✅ **文章分页算法**：智能分页算法，支持 HTML 和纯文本

---

## 十、更新日志

### 2025年更新
- ✅ 添加实现状态标记（✅ 已实现 / ⚠️ 部分实现 / ❌ 待实现）
- ✅ 更新技术实现细节（HashRouter、API配置等）
- ✅ 添加新增功能说明（文章分页、模板解析、AI统计）
- ✅ 标注待实现功能清单
- ✅ 添加功能实现状态总结章节

---
